/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package net.visp.mvpshortcut;

import com.google.gson.Gson;
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import java.io.Serializable;
import javax.swing.JPanel;
import net.visp.mvpshortcut.interfaces.Model;
import net.visp.mvpshortcut.interfaces.Presenter;

/**
 *
 * @author RBORJA
 */
public class MyPresenter extends Presenter {

    public MyPresenter(Model model, JPanel view) {
        super(model, view);
    }

    public void submit() {
        MyModel model = (MyModel) super.getModel();
        model.setNewText(model.getName() + " " + model.getLastname());
        Client g7 = Client.create();

        WebResource webResource = g7.resource("http://10.0.1.46:8080/g8/phonelabel/add");

        class customModel implements Serializable {
            private String phoneLabel;

            public customModel() {
                phoneLabel = "Ritchie";
            }
            
            public String getPhoneLabel() {
                return phoneLabel;
            }

            public void setPhoneLabel(String phoneLabel) {
                this.phoneLabel = phoneLabel;
            }

            
        }

        customModel model2 = new customModel();
        model2.setPhoneLabel(model.getName());
        
        Gson gson = new Gson();


        ClientResponse response = webResource.type("application/json").post(ClientResponse.class, gson.toJson(model));

        System.out.println(gson.toJson(model));
    }

    public void display() {
        MyModel model = (MyModel) super.getModel();
        Client g7 = Client.create();

        WebResource webResource = g7.resource("http://10.0.1.46:8080/g8/phonelabel/get/" + model.getLastname());

        ClientResponse response = webResource.get(ClientResponse.class);

        System.out.println(response.getEntity(String.class));
    }

    public void update() {
        MyModel model = (MyModel) super.getModel();
        model.setNewText(model.getName() + " " + model.getLastname());
    }

    public void update2() {
        MyModel model = (MyModel) super.getModel();
        model.setNewText(model.getName() + " " + model.getLastname());
    }

    public void update3() {
        MyModel model = (MyModel) super.getModel();
        model.setNewText(model.getName() + " " + model.getLastname());
    }
}
